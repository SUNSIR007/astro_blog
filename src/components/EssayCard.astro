---
import type { CollectionEntry } from 'astro:content'

interface Props {
  essay: CollectionEntry<'essays'>
}

const { essay } = Astro.props

// 格式化时间为简洁格式，包含具体时间
function formatEssayDate(date: Date) {
  const year = date.getFullYear()
  const month = String(date.getMonth() + 1).padStart(2, '0')
  const day = String(date.getDate()).padStart(2, '0')
  const hours = String(date.getHours()).padStart(2, '0')
  const minutes = String(date.getMinutes()).padStart(2, '0')
  return `${year}/${month}/${day} ${hours}:${minutes}`
}
---

<!-- 带连接线的随笔卡片 -->
<article class="relative">
  <!-- 圆点和内容 -->
  <div class="relative flex gap-3 py-6">
    <div class="flex-shrink-0 relative">
      <!-- 连接线 - 从上一个圆点延伸到当前圆点，再延伸到下一个圆点 -->
      <div class="absolute left-1/2 -top-6 bottom-1/2 w-px bg-gray-600 essay-line-top"></div>
      <div class="absolute left-1/2 top-1/2 -bottom-6 w-px bg-gray-600 essay-line-bottom"></div>

      <!-- 圆点 -->
      <div class="w-4 h-4 rounded-full bg-gray-500 relative z-10"></div>
    </div>

    <!-- 内容区域 -->
    <div class="flex-1 min-w-0 pb-4">
      <!-- 用户名和时间 -->
      <div class="flex items-center gap-2 mb-2">
        <span class="text-white font-medium text-sm">Ryuichi</span>
        <span class="text-gray-500 text-xs">{formatEssayDate(essay.data.pubDate)}</span>
      </div>

      <!-- 随笔内容 - 增大字体 -->
      <div class="text-gray-300 text-base leading-relaxed">
        <slot />
      </div>
    </div>
  </div>
</article>
